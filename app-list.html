<link rel="import" href="app-item.html">

<polymer-element name="app-list" attributes="">
    <template>
        <style>
            *{
                font-family: Roboto;
                font-weight: 300;
            }
        </style>

        <template repeat="{{app in apps}}">
            <app-item name="{{app.name}}" icon="{{app.icon}}"></app-item>
        </template>
        <hr/>
        <template repeat="{{app in links}}">
            <app-item name="{{app.type}}" icon="{{app.icon}}"></app-item>
        </template>
    </template>

    <script>
        Polymer({
            ready:function(){
                this.apps = [];
                this.links = [];
                var self = this;
                chrome.management.getAll(function(list){
                    // console.log(list);
                    for(var i in list){
                        // console.log('app',list[i]);
                        var app = list[i];
                        if(app.icons) app.icon = app.icons[app.icons.length-1].url;//.replace('chrome://','');
                        else app.icon = '';
                        // app.icon2 = "<img src='"+app.icon+"'/>";
                        // console.log(app.appLaunchUrl);
                        // if(app.offlineEnabled) $scope.offline.push(app); //  && app.type=='packaged_app'
                        if(app.type=='packaged_app') self.apps.push(app);
//                        else self.links.push(app);
                        else if(app.type=='legacy_packaged_app') self.links.push(app);
                        else if(app.type=='hosted_app') self.links.push(app); //$scope.links.push(app);
                    }
                    // setTimeout(function(){ $app.$apply(); },10);
//                    setTimeout(defaultImage, 10);
                });
            }

        });
    </script>
</polymer-element>
